<style>
.ui-dialog-titlebar {
  background-color: "black";
  background-image: none;
  color: #000;
}

ul.ui-autocomplete.ui-menu {
  z-index: 1000;
}


input[autocomplete="off"]::-webkit-contacts-auto-fill-button,
input[autocomplete="off"]::-webkit-credentials-auto-fill-button {
visibility: hidden;
display: none !important;
pointer-events: none;
height: 0;
width: 0;
margin: 0;
}
</style>

<div class="row">
	<div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
		<h1 class="page-title txt-color-blueDark"><i class="fa fa-calendar fa-fw "></i> 
			Calendar
			<span>>
			Add events
			</span>
		</h1>
	</div>
	<div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
		<ul id="sparks" class="">
			<li class="sparks-info">
				
			</li>
			<li class="sparks-info">
				
			</li>
			<li class="sparks-info">
				<h5> Total patients seen <span class="txt-color-greenDark"><i class="fa fa-hopping-cart"></i>&nbsp;{{patientNumbers}}</span></h5>
				<div class="sparkline txt-color-greenDark hidden-mobile hidden-md hidden-sm">
					110,150,300,130,400,240,220,310,220,300, 270, 210
				</div>
			</li>
		</ul>
	</div>
</div>
<!-- row -->

<div class="row">


	<div >
		<!-- new widget -->
		
		<div id="newEvent" class="jarviswidget jarviswidget-color-blueDark " title = "New Appointment">
			

			<!-- widget div-->
			<div>

				<div class="widget-body">
					<!-- content goes here -->

					<form id="add-event-form" class="appointmentForm">
						<fieldset>
							<div class="form-group">
								<label>Appointment Name</label>
								<input class="form-control"  id="title" name="title" maxlength="40" type="text" placeholder="Appointment Name" autocomplete="nope">
							</div>
							<div class="form-group">
								<label>Appointment Type</label>
								<div class="btn-group btn-group-sm btn-group-justified" data-toggle="buttons">
									<label class="btn btn-default">
										<input type="radio" name="iconselect" id="icon-1" value="New Patient" checked>
										New Patient
										</label>
									<label class="btn btn-default">
										<input type="radio" name="iconselect" id="icon-2" value="Follow up">
										Follow Up
									</label>
								</div>
							</div>
								<div class="form-group">
								<label>Phone number</label>
								<input class="form-control"  id="phoneNumber" name="phoneNumber" maxlength="40" type="text"	>
							</div>
							<div class="form-group">
								<label>Email</label>
								<input class="form-control"  id="email" name="email" maxlength="40" type="text"	>
							</div>
							<div class="form-group">
								<label>Notes</label>
								<textarea class="form-control" placeholder="Notes" rows="3" maxlength="200" id="notes"></textarea>
							</div>
							
							<div class="form-group">
								<label>start</label>
								<input class="form-control"  id="start" name="start" maxlength="40" type="text" placeholder="start date">
							</div>
							
							<div class="form-group">
								<label>end</label>

								<input class="form-control"  id="end" name="end" maxlength="40" type="text" placeholder="end date">
							</div>

							<div class="form-group">
								<label>Select Event Color</label>
								<div class="btn-group btn-group-justified btn-select-tick" data-toggle="buttons">
									<label class="btn bg-color-darken active">
										<input type="radio" name="priority" id="option1" value="bg-color-darken txt-color-white" checked>
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-blue">
										<input type="radio" name="priority" id="option2" value="bg-color-blue txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-orange">
										<input type="radio" name="priority" id="option3" value="bg-color-orange txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-greenLight">
										<input type="radio" name="priority" id="option4" value="bg-color-greenLight txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-blueLight">
										<input type="radio" name="priority" id="option5" value="bg-color-blueLight txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-red">
										<input type="radio" name="priority" id="option6" value="bg-color-red txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
								</div>
							</div>

						</fieldset>
						<div class="form-actions">
							<!--<div class="row">
								<div class="col-md-12">
									<button class="btn btn-default" type="button" id="add-event" >
										Add Event
									</button>
								</div>
							</div>-->
						</div>
					</form>

					<!-- end content -->
				</div>

			</div>
			<!-- end widget div -->
		</div>
		
		
		<div id="appointment" class="jarviswidget jarviswidget-color-blueDark " title = "Appointment">
			

			<!-- widget div-->
			<div>

				<div class="widget-body">
					<!-- content goes here -->

					<form id="add-event-form" class="appointmentForm">
						<fieldset>
							<div class="form-group">
								<label>Appointment Name</label>
								<input class="form-control"  id="appointmentTitle" name="appointmentTitle" maxlength="40" type="text" placeholder="Event Title">
							</div>
							<div class="form-group">
								<label>Appointment Type</label>
								<div class="btn-group btn-group-sm btn-group-justified" data-toggle="buttons">
									<label class="btn btn-default">
										<input type="radio" name="appointmentIconselect" id="appointmentIcon-1" value="New Patient">
										New Patient
										</label>
									<label class="btn btn-default">
										<input type="radio" name="appointmentIconselect" id="appointmentIcon-2" value="Follow up">
										Follow Up
									</label>
								</div>
							</div>
								<div class="form-group">
								<label>Phone number</label>
								<input class="form-control"  id="appointmentPhoneNumber" name="appointmentPhoneNumber" maxlength="40" type="text"	>
							</div>
							<div class="form-group">
								<label>Email</label>
								<input class="form-control"  id="appointmentEmail" name="email" maxlength="40" type="text"	>
							</div>
							<div class="form-group">
								<label>Notes</label>
								<textarea class="form-control" placeholder="Notes" rows="3" maxlength="200" id="appointmentNotes"></textarea>
							</div>
							
							<div class="form-group">
								<label>start</label>
								<input class="form-control"  id="appointmentStart" name="appointmentStart" maxlength="40" type="text" placeholder="start date">
							</div>
							
							<div class="form-group">
								<label>end</label>

								<input class="form-control"  id="appointmentEnd" name="appointmentEnd" maxlength="40" type="text" placeholder="end date">
							</div>

							<div class="form-group">
								<label>Select Event Color</label>
								<div class="btn-group btn-group-justified btn-select-tick" data-toggle="buttons">
									<label class="btn bg-color-darken active">
										<input type="radio" name="appointmentPriority" id="option1" value="bg-color-darken txt-color-white" checked>
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-blue">
										<input type="radio" name="appointmentPriority" id="option2" value="bg-color-blue txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-orange">
										<input type="radio" name="appointmentPriority" id="option3" value="bg-color-orange txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-greenLight">
										<input type="radio" name="appointmentPriority" id="option4" value="bg-color-greenLight txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-blueLight">
										<input type="radio" name="appointmentPriority" id="option5" value="bg-color-blueLight txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
									<label class="btn bg-color-red">
										<input type="radio" name="appointmentPriority" id="option6" value="bg-color-red txt-color-white">
										<i class="fa fa-check txt-color-white"></i> </label>
								</div>
							</div>

						</fieldset>
						<div class="form-actions">
							<!--<div class="row">
								<div class="col-md-12">
									<button class="btn btn-default" type="button" id="add-event" >
										Add Event
									</button>
								</div>
							</div>-->
						</div>
					</form>

					<!-- end content -->
				</div>

			</div>
			<!-- end widget div -->
		</div>
		
		<!-- end widget -->

		
	<div class="col-sm-12">

		<!-- new widget -->
		<div class="jarviswidget jarviswidget-color-blueDark">

			<!-- widget options:
			usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

			data-widget-colorbutton="false"
			data-widget-editbutton="false"
			data-widget-togglebutton="false"
			data-widget-deletebutton="false"
			data-widget-fullscreenbutton="false"
			data-widget-custombutton="false"
			data-widget-collapsed="true"
			data-widget-sortable="false"

			-->
			<header>
				<span class="widget-icon"> <i class="fa fa-calendar"></i> </span>
				<h2> Appointments </h2>
				<div class="widget-toolbar">
					<!-- add: non-hidden - to disable auto hide -->
					<div class="btn-group">
						<button class="btn dropdown-toggle btn-xs btn-default" data-toggle="dropdown">
							Showing <i class="fa fa-caret-down"></i>
						</button>
						<button id="addEvent" class="btn dropdown-toggle btn-xs btn-default">
							Add Event <i class="fa fa-caret"></i>
						</button>
						<button id="hideEvent" onclick="hideEvents()" class="btn dropdown-toggle btn-xs btn-default">
							<span class="glyphicon glyphicon-eye-open"><i class="fa fa-caret"></i>
						</button>
						<ul class="dropdown-menu js-status-update pull-right">
							<li>
								<a href="javascript:void(0);" id="mt">Month</a>
							</li>
							<li>
								<a href="javascript:void(0);" id="ag">Agenda</a>
							</li>
							<li>
								<a href="javascript:void(0);" id="td">Today</a>
							</li>
							<li>
								<a href="javascript:void(0);" id="wk">Week</a>
							</li>
						</ul>
					</div>
				</div>
			</header>

			<!-- widget div-->
			<div>

				<div class="widget-body no-padding ">
					<!-- content goes here -->
					<div class="widget-body-toolbar">

						<div id="calendar-buttons">

							<div class="btn-group">
								<a href="javascript:void(0)" class="btn btn-default btn-xs" id="btn-prev"><i class="fa fa-chevron-left"></i></a>
								<a href="javascript:void(0)" class="btn btn-default btn-xs" id="btn-next"><i class="fa fa-chevron-right"></i></a>
							</div>
						</div>
					</div>
					<div id="calendar"></div>

					<!-- end content -->
				</div>

			</div>
			<!-- end widget div -->
		</div>
		<!-- end widget -->

	</div>

</div>

<!-- end row -->

<script type="text/javascript">
	/* DO NOT REMOVE : GLOBAL FUNCTIONS!
	 *
	 * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
	 *
	 * // activate tooltips
	 * $("[rel=tooltip]").tooltip();
	 *
	 * // activate popovers
	 * $("[rel=popover]").popover();
	 *
	 * // activate popovers with hover states
	 * $("[rel=popover-hover]").popover({ trigger: "hover" });
	 *
	 * // activate inline charts
	 * runAllCharts();
	 *
	 * // setup widgets
	 * setup_widgets_desktop();
	 *
	 * // run form elements
	 * runAllForms();
	 *
	 ********************************
	 *
	 * pageSetUp() is needed whenever you load a page.
	 * It initializes and checks for all basic elements of the page
	 * and makes rendering easier.
	 *
	 */

	pageSetUp();
	
	/*
	 * ALL PAGE RELATED SCRIPTS CAN GO BELOW HERE
	 * eg alert("my home function");
	 * 
	 * var pagefunction = function() {
	 *   ...
	 * }
	 * loadScript("js/plugin/_PLUGIN_NAME_.js", pagefunction);
	 * 
	 * TO LOAD A SCRIPT:
	 * var pagefunction = function (){ 
	 *  loadScript(".../plugin.js", run_after_loaded);	
	 * }
	 * 
	 * OR
	 * 
	 * loadScript(".../plugin.js", run_after_loaded);
	 */
	
	// PAGE RELATED SCRIPTS

	// pagefunction

	
	
	
	function hideEvents()
    		{
    		
    			
 				$( '.fc-title' ).toggle();
			
    		}
    		
       
	  
 	
	var fullviewcalendar;
	$('#newEvent').hide();		
	$('#dropEvent').hide();
	var pagefunction = function() {
		
		// full calendar
		
		var date = new Date();
	    var d = date.getDate();
	    var m = date.getMonth();
	    var y = date.getFullYear();
	
	    var hdr = {
	        left: 'title',
	        center: 'month,agendaWeek,agendaDay,week',
	        right: 'prev,today,next'
	    };
	
	    var initDrag = function (e) {
	        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
	        // it doesn't need to have a start or end
	
	        var eventObject = {
	            title: $.trim(e.children().text()), // use the element's text as the event title
	            description: $.trim(e.children('span').attr('data-description')),
	            icon: $.trim(e.children('span').attr('data-icon')),
	            start: $.trim(e.children('span').attr('data-start')),
	            end: $.trim(e.children('span').attr('data-end')),
	            className: $.trim(e.children('span').attr('class')) // use the element's children as the event class
	        };
	        // store the Event Object in the DOM element so we can get to it later
	        e.data('eventObject', eventObject);
	
	        // make the event draggable using jQuery UI
	        e.draggable({
	            zIndex: 999,
	            revert: true, // will cause the event to go back to its
	            revertDuration: 0 //  original position after the drag
	        });
	    };
	
	    var addEvent = function (title, priority, description, icon , start , end) {
	        title = title.length === 0 ? "Untitled Event" : title;
	        description = description;
	        icon = icon;
	        priority = priority.length === 0 ? "label label-default" : priority;
			start = start.length === 0 ? " " : start;
			end = end.length === 0 ? " " : end;
	        var html = $('<li><span class="' + priority + '" data-description="' + description + '" data-icon="' + icon + '" data-start="' + start + '" data-end="' + end +'">' + title + '</span></li>').prependTo('ul#external-events').hide().fadeIn();
	
	        $("#event-container").effect("highlight", 800);
	
	        initDrag(html);
	    };
	
	    /* initialize the external events
		 -----------------------------------------------------------------*/
	
	    $('#external-events > li').each(function () {
	        initDrag($(this));
	    });
	    
	    /* added functions 
	    ----------------------------------------------------------------*/
	  
	    
	    var aEvent;
	     function deleteEvent () {
	     	$('#calendar').fullCalendar( 'removeEvents' , aEvent._id);
	     	$.ajax({
    						type : "POST",
    						url : "{{ url_for('deleteAppointment') }}",
    						data: JSON.stringify({"id": aEvent.id , "title" : aEvent.title}),
    						contentType: 'application/json;charset=UTF-8',
    						success: function(result) {
        					console.log(result);
    						}
						});
	     	 appointmentDialog.dialog( "close" );
	     
	     }
	     
	     
	     function updateAppointment ()
	     {
	     
	     	 var title = $('#appointmentTitle').val(),
	            priority = $('input:radio[name=appointmentPriority]:checked').val(),
	            icon = $('input:radio[name=appointmentIconselect]:checked').val(),
	            description = icon,
	            start = $('#appointmentStart').val(),
	            end = $('#appointmentEnd').val(),
	            allDay = false,
	            phoneNumber = $("#appointmentPhoneNumber").val()
	            email = $("#email").val(),
	            notes = $("#notes").val();
	            
	    var event;
	     if (title) {
			             event =   {
			             			id : aEvent.id,
			                        title: title,
			                        description:description,
			                        start: start,
			                        end: end,
			                        allDay: allDay,
			                        className: priority,
			                        "phoneNumber" : phoneNumber,
    								"email" : email,
    								"notes" : notes,
			                        "oldTitle" : aEvent.title,
			                        "patientId" : patientId,
			                        "canceled" : false,
			                    };
			
				$.ajax({
    						type : "POST",
    						url : "{{ url_for('updateAppointment') }}",
    						data: JSON.stringify(event),
    						contentType: 'application/json;charset=UTF-8',
    						success: function(result) {
        					
    						}
						});
						$('#calendar').fullCalendar( 'removeEvents' , aEvent._id);
						$('#calendar').fullCalendar('renderEvent', event, true);
						appointmentDialog.dialog( "close" );
						
	     
	     }
	
	    }
	    
	    function addAppointment () {
	        var title = $('#title').val(),
	            priority = $('input:radio[name=priority]:checked').val(),
	            icon = $('input:radio[name=iconselect]:checked').val(),
	            description = icon,
	            start = $('#start').val(),
	            end = $('#end').val(),
	            allDay = false,
	            phoneNumber = $("#phoneNumber").val(),
	            email = $("#email").val(),
	            notes = $("#notes").val();
	            var id = String(date.getDate()) + date.getMonth() + (date.getHours() + Math.floor((Math.random() * 1000) + 1));	
	            var patientId = date.getDate() + date.getMonth() + Math.floor((Math.random() * 1000) + 1);	

			var event;
	        addEvent(title, priority, description, icon , start , end);
	        
	       if (title) {
			             event =   {
			             			id : id,
			                        title: title,
			                        description:description,
			                        start: start,
			                        end: end,
			                        allDay: allDay,
			                        className: priority,
			                        "phoneNumber" : phoneNumber,
			                        "email" : email,
			                        "notes" : notes,
			                        "patientId" : patientId,
			                        "canceled" : false,
			                        
			                    };
			                    
			                    $('#calendar').fullCalendar('renderEvent', event, true // make the event "stick"
			                );
			            }
			            console.log(event);
			            $.ajax({
    						type : "POST",
    						url : "{{ url_for('addAppointment') }}",
    						data: JSON.stringify(event),
    						contentType: 'application/json;charset=UTF-8',
    						success: function(result) {
        					console.log(result);
    						}
						});
			
	        dialog.dialog( "close" );
	        
	    };
	    
	    
	    
	    	
	    	
	    	dialog = $( "#newEvent" ).dialog({
      		autoOpen: false,
      		height: 700,
      		width: 350,
      		modal: true,
      		cache: false,
      		
      		//dialogClass: "ui-dialog-titlebar ui-widget-header",
      		
			buttons: {
        		"Add Event": addAppointment,
        		Cancel: function() {
          		dialog.dialog( "close" );
          	
        		}
        		}
    		});
 	
 	$( "#addEvent" ).button().on( "click", function() {
      dialog.dialog( "open" );
    });
    
   	
	    	appointmentDialog = $( "#appointment" ).dialog({
      		autoOpen: false,
      		height: 700,
      		width: 350,
      		modal: true,
      		cache: false,
      		
      		
			buttons: {
        		"update Event": updateAppointment,
        		"Delete Event": deleteEvent,
        		Cancel: function() {
          		appointmentDialog.dialog( "close" );
          	
        		}
        		}
    		});
    		
    		
 	 $(function nameSerach() {
    $("#title").autocomplete({
        source:function(request, response) {
            $.getJSON("{{url_for('autocomplete')}}",{
                q: request.term, // in flask, "q" will be the argument to look for using request.args
            }, function(data) {
                response(data.matching_results);
               // matching_results from jsonify
            });
        },
        minLength: 1,
        select: function(event, ui) {
        	
            $.post("{{url_for('getPatient')}}",{"data" : ui.item.value}, function(results, status){
        		
        		$('#notes').val(results[0].notes)
        		$('#email').val(results[0].email)
        		$('#phoneNumber').val(results[0].phoneNumber)
   			 });
            // not in your question, but might help later
        }
    });
})
	/*----------------------------------------------------------------------*/
	   /* $('#add-event').click(function () {
	        var title = $('#title').val(),
	            priority = $('input:radio[name=priority]:checked').val(),
	            description = $('#description').val(),
	            start = $('#start').val(),
	            end = $('#end').val(),
	            icon = $('input:radio[name=iconselect]:checked').val();
	
	        addEvent(title, priority, description, icon , start , end);
	    }); */
	
	    /* initialize the calendar
		 -----------------------------------------------------------------*/
	
	    fullviewcalendar = $('#calendar').fullCalendar({
	
	        header: hdr,
			        editable: true,
			        droppable: true, // this allows things to be dropped onto the calendar !!!
					eventLimit: true,
					slotDuration: '00:15:00',
					selectable:true,
					defaultView : 'agendaWeek',
					selectHelper : true,
					unselectAuto: true,
					unselectCancel : ".appointmentForm",
					scrollTime : '08:00:00',
					businessHours: { start: '08:00', end: '19:00' },
			        drop: function (date, allDay) { // this function is called when something is dropped
					
			            // retrieve the dropped element's stored Event Object
			            var originalEventObject = $(this).data('eventObject');
			
			            // we need to copy it, so that multiple events don't have a reference to the same object
			            var copiedEventObject = $.extend({}, originalEventObject);
			
			            // assign it the date that was reported
			            copiedEventObject.start = date;
			            copiedEventObject.allDay = allDay;
			
			            // render the event on the calendar
			            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
			            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
						
			            // is the "remove after drop" checkbox checked?
			            if ($('#drop-remove').is(':checked')) {
			                // if so, remove the element from the "Draggable Events" list
			                $(this).remove();
			            }
			
			        },
			
			        select: function (start, end, allDay) {
			        
			        	//RESET FORM when selected 
			        	$('#title').val("");
	           			$("#phoneNumber").val("");
	           			$("#email").val("");
	           			$("#notes").val("");
			        	$('#start').val(start.format()),
	            		$('#end').val(end.format());
			        	dialog.dialog( "open" );
			            $('#calendar').fullCalendar('unselect');
			        	
			        },
			        
			    
			        /*
			         eventClick: function(calEvent, jsEvent, view) {
						
						console.log(calEvent);
						
						
						if (confirm('Delete Event?')) {
							$.ajax({
    						type : "POST",
    						url : "{{ url_for('deleteAppointment') }}",
    						data: JSON.stringify({"id": calEvent.id , "title" : calEvent.title}),
    						contentType: 'application/json;charset=UTF-8',
    						success: function(result) {
        					console.log(result);
    						}
						});
							$('#calendar').fullCalendar( 'removeEvents' , calEvent._id);
   						 	
						} else {
 					   // Do nothing!
						}
						
						
					
						
						
  						},
  					
        
			       */
			        
			        
			        eventDrop: function(event, delta, revertFunc) {
					
					
    				$.ajax({
    						type : "POST",
    						url : "{{ url_for('updateAppointment') }}",
    						data: JSON.stringify({
    												"id": event.id,
    												"title": event.title,
    												"description":event.description,
    												"start": event.start,
    												"end": event.end,
    												"allDay" : event.allDay,
    												"className": event.className.join(" "),
    												"phoneNumber" : event.phoneNumber,
    												"email" : event.email,
    												"notes" : event.notes
    											}),
    						contentType: 'application/json;charset=UTF-8',
    						success: function(result) {
        					console.log(result);
    						}
						});

   					console.log(event);
						$('#calendar').fullCalendar('unselect');
 						 },
 				
					
					//list of event objects stored in the database loaded with page
			        events: 
			         {{event|tojson|safe}},
					
			        eventRender: function (event, element, icon) {
			            if (!event.description == "") {
			                element.find('.fc-title').append("<br/><span class='ultra-light'>" + event.description +
			                    "</span>");
			            }
			            if (!event.icon == "") {
			                element.find('.fc-title').append("<i class='air air-top-right fa " + event.icon +
			                    " '></i>");
			            }
			            
			            element.bind('dblclick', function() {
							$('#appointmentTitle').val(event.title);
	           				$('input[name="appointmentIconselect"][value="'+event.description+'"]').click();
	           				$('input[name="appointmentPriority"][value="'+event.className.join(" ")+'"]').click();
	           				$('#appointmentStart').val(event.start.format());
	            			$('#appointmentEnd').val(event.end.format());
	           				$("#appointmentPhoneNumber").val(event.phoneNumber);
	           				$("#appointmentEmail").val(event.email);
	           				$("#appointmentNotes").val(event.notes);
	           				
							aEvent = event;
							
         					appointmentDialog.dialog( "open" );
         					$('#calendar').fullCalendar('unselect');
      					});	
      		
      		
      		
			        },
			        
			        
			
			        windowResize: function (event, ui) {
			            $('#calendar').fullCalendar('render');
			        }
			    });
		
		    /* hide default buttons */
		    $('.fc-right, .fc-center').hide();

		
			$('#calendar-buttons #btn-prev').click(function () {
			    $('.fc-prev-button').click();
			    return false;
			});
			
			$('#calendar-buttons #btn-next').click(function () {
			    $('.fc-next-button').click();
			    return false;
			});
			
			$('#calendar-buttons #btn-today').click(function () {
			    $('.fc-today-button').click();
			    return false;
			});
			
			$('#mt').click(function () {
			    $('#calendar').fullCalendar('changeView', 'month');
			});
			
			$('#ag').click(function () {
			    $('#calendar').fullCalendar('changeView', 'agendaWeek');
			});
			
			$('#td').click(function () {
			    $('#calendar').fullCalendar('changeView', 'agendaDay');
			});	
			
			$('#wk').click(function () {
			    $('#calendar').fullCalendar('changeView', 'listWeek');
			});
					
		
	};
	
	// end pagefunction
	
	// destroy generated instances 

	// destroy generated instances 
	// pagedestroy is called automatically before loading a new page
	// only usable in AJAX version!

	var pagedestroy = function(){

		/*
		Example below:

		$("#calednar").fullCalendar( 'destroy' );
		if (debugState){
			root.console.log("✔ Calendar destroyed");
		} 

		For common instances, such as Jarviswidgets, Google maps, and Datatables, are automatically destroyed through the app.js loadURL mechanic

		*/
		
		fullviewcalendar.fullCalendar( 'destroy' );
		fullviewcalendar = null;
		$("#add-event").off();
		$("#add-event").remove();

		$('#external-events > li').off();
		$('#external-events > li').remove();
		$('#add-event').off();
		$('#add-event').remove();
		$('#calendar-buttons #btn-prev').off();
		$('#calendar-buttons #btn-prev').remove();
		$('#calendar-buttons #btn-next').off();
		$('#calendar-buttons #btn-next').remove();
		$('#calendar-buttons #btn-today').off();
		$('#calendar-buttons #btn-today').remove();
		$('#mt').off();
		$('#mt').remove();
		$('#ag').off();
		$('#ag').remove();
		$('#td').off();
		$('#td').remove();

		if (debugState){
			root.console.log("✔ Calendar destroyed");
		} 
	}

	// end destroy

	// loadscript and run pagefunction
	loadScript("{{ url_for('static',filename='js/plugin/moment/moment.min.js')}}", function(){
		loadScript("{{ url_for('static',filename='js/plugin/fullcalendar/jquery.fullcalendar.min.js')}}", pagefunction);
		
	});



</script>
